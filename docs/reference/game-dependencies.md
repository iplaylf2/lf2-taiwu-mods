# 游戏依赖包说明

本页面说明 Mod 开发中可用的 `LF2.Taiwu.*` 系列依赖包及其用途，帮助开发者根据功能需求选择合适的依赖。

## 设计理念

本模板将《太吾绘卷》官方程序集按功能重新组织为语义化的 NuGet 包，核心价值在于：

**1. 简化依赖引用**

- 避免从上百个 DLL 文件中手动挑选组件
- 通过高内聚的功能包降低学习成本和出错概率

**2. 降低冲突风险**

- 确保使用的第三方库版本与游戏完全一致
- 从源头避免版本兼容性问题

**3. 促进关注点分离**

- 支持模块仅引用真正需要的依赖子集
- 保持 Mod 的轻量化和模块化

> **注意**：清单文件中使用 `Taiwu.*` 前缀进行目录组织，但实际生成的 NuGet 包为 `LF2.Taiwu.*` 前缀。

## 依赖包分类

### 1. 游戏核心逻辑包

这部分包含游戏的核心业务逻辑，按照架构层次细分：

**`LF2.Taiwu.Backend`** - 后端核心逻辑

- **适用场景**：需要与游戏核心数据、存档系统、角色逻辑等深度交互
- **典型用例**：修改游戏机制、处理存档数据、操作角色属性
- **必要性**：大部分功能型 Mod 的必需依赖

**`LF2.Taiwu.Frontend`** - 前端界面逻辑

- **适用场景**：需要修改游戏界面、创建新 UI 元素、响应用户交互
- **典型用例**：添加界面面板、修改现有 UI、处理用户输入事件
- **必要性**：UI 相关 Mod 的必需依赖

**`LF2.Taiwu.Shared`** - 共享组件

- **适用场景**：需要使用前后端共享的数据结构和工具函数
- **设计目的**：统一管理共享组件，避免重复引用
- **使用建议**：当不确定是否需要时，通常应该引用

### 2. Modding 框架包

这部分提供 Mod 运行和修改游戏代码的基础设施：

**`LF2.Taiwu.Modding`** - 官方 Mod 入口

- **核心地位**：让 Mod 被游戏识别和加载的"钥匙"
- **重要性**：**所有 Mod 都必须引用此库**，否则无法被游戏正确识别
- **主要功能**：Mod 生命周期管理、事件系统等基础服务

**`LF2.Taiwu.BepInEx`** - 代码补丁框架

- **适用场景**：需要使用 HarmonyX 等技术动态修改游戏原有代码
- **包含内容**：`0Harmony.dll`、`Mono.Cecil.dll`、`MonoMod.RuntimeDetour.dll` 等补丁工具
- **核心价值**：一站式获取所有必要的"打补丁"工具

### 3. 游戏内置第三方库包

游戏本体包含大量第三方库，为避免版本冲突，这些库被打包为 `LF2.Taiwu.*` 版本。当 Mod 需要使用这些库时，**强烈建议优先引用这些版本**：

**其他库示例**：

- **`LF2.Taiwu.Newtonsoft.Json`**：JSON 序列化和反序列化
- **`LF2.Taiwu.MoonSharp`**：Lua 脚本执行引擎
- **`LF2.Taiwu.Google.Protobuf`**：Protocol Buffers 数据序列化
- **`LF2.Taiwu.NLog`**：日志记录框架
- **`LF2.Taiwu.Spine`**：2D 动画渲染系统

### 4. Unity 引擎库包

Unity 引擎程序集按功能用途归类：

**`LF2.Taiwu.Unity.Core`** - 核心引擎模块

- **适用场景**：大部分 Mod 开发的基础需求
- **包含内容**：最常用和核心的 Unity 引擎模块

**`LF2.Taiwu.Unity.Addons`** - 附加组件模块

- **适用场景**：需要高级文本渲染或时间轴功能
- **包含内容**：`TextMeshPro`、`Timeline` 等 Unity 官方附加组件

**`LF2.Taiwu.Unity.Services`** - 在线服务模块

- **适用场景**：需要数据统计或云服务功能
- **包含内容**：Unity Analytics、云服务等在线服务相关库

## 最佳实践

1. **最小化依赖**：仅引用 Mod 实际需要的包
2. **版本一致性**：优先使用 `LF2.Taiwu.*` 前缀的第三方库版本
3. **功能分离**：根据 Mod 的具体功能选择合适的依赖组合
4. **测试验证**：确保在目标游戏版本上测试依赖兼容性

> **查看完整清单**：如需了解所有包的详细文件组成，请参阅 [`game-libs.manifest.yaml`](../../projects/unmanaged-vendor/game/game-libs.manifest.yaml)。

## 相关参考

- **[依赖基础设施](./dependency-infrastructure.md)** - 了解依赖包的构建和管理机制
- **[构建系统参考](./build-system.md)** - 深入了解 MSBuild 目标和自动化机制
