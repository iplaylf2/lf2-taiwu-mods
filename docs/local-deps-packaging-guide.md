# 本地依赖打包指南

本文档介绍将非托管依赖项打包为本地 NuGet 包的备选方案。

---

## 📦 将依赖项打包到本地并恢复

> [!NOTE]
> **方案互斥**
> 请注意：本地方案与主文档中推荐的远程源方案是互斥的，请不要同时启用。如需切换回远程源方案，请参考主方案文档中的指引。

此方法是解决游戏核心程序集依赖问题的最直接方案，适合快速上手、项目初期验证或快速调试。它将这些依赖打包到项目本地的 `.lf2.nupkg` 目录下，供 `dotnet restore` 直接使用，从而避免了它们的网络分发。

1. **准备文件**: 将需要打包的程序集（DLL文件）放入对应 `unmanaged-vendor` 项目下的 `lib/` 目录中。关于游戏核心程序集的目录结构，请参阅 `projects/unmanaged-vendor/README.md` 中的“必要目录结构”一节。
2. **打包**: 在**仓库根目录**下运行 `dotnet pack`。此命令会将 `unmanaged-vendor` 目录下的所有项目打包至 `.lf2.nupkg/` 文件夹。
3. **启用本地源**: 在**仓库根目录**下运行 `dotnet nuget enable source local`。由于本地源默认禁用，此步骤是**必需的**。
4. **恢复**: 在**仓库根目录**下运行 `dotnet restore`。NuGet 会自动找到本地包并完成依赖恢复。

> [!TIP]
> `dotnet pack` 命令会一次性处理所有 `unmanaged-vendor` 项目。`lib` 目录为空的项目也会被正常打包成一个空包，以确保 `dotnet restore` 能够顺利执行。
